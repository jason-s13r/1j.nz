<!DOCTYPE html>
<html lang="en-us">
<head>
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">

<title>index.html  - Jason Schwarzenberger</title>
<meta name="description" content="Software engineer from New Zealand.">

<link rel="icon" type="image/x-icon" href="https://jason.schwarzenberger.nz/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="https://jason.schwarzenberger.nz/favicon.png">

<link rel="stylesheet" href="https://jason.schwarzenberger.nz/css/style.css?rnd=1591147580" />

<link rel="stylesheet" href="https://jason.schwarzenberger.nz/css/my.css?rnd=1591147580">

<meta property="og:title" content="index.html" />
<meta property="og:description" content="gist link
   Attachment Type Size     index.html text/html 2.3KiB   pretty-bitnz.js application/javascript 2.8KiB     index.html &ndash; text/html, 2.3KiB &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;script src=&#34;http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/hmac-sha256.js&#34;&gt;&lt;/script&gt; &lt;script src=&#34;https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.17/angular.min.js&#34;&gt;&lt;/script&gt; &lt;script src=&#34;libs/bitnz-angular/bitnz-angular.js&#34;&gt;&lt;/script&gt; &lt;script src=&#34;js/pretty-bitnz.js&#34;&gt;&lt;/script&gt; &lt;style&gt; &lt;/style&gt; &lt;/head&gt; &lt;body ng-app=&#34;PrettyBitNZ&#34;&gt; &lt;div style=&#34;border: solid 1px #000&#34;&gt; &lt;div ng-controller=&#34;Ticker&#34;&gt; &lt;button ng-click=&#34;Start()&#34;&gt;Start&lt;/button&gt; &lt;button ng-click=&#34;Stop()&#34;&gt;Stop&lt;/button&gt; {{ ticker }} &lt;/div&gt; &lt;/div&gt; &lt;div style=&#34;border: solid 1px #000;&#34;&gt; &lt;form ng-controller=&#34;Configuration&#34; ng-submit=&#34;Authorize()&#34;&gt; &lt;input type=&#34;text&#34; placeholder=&#34;username&#34; ng-model=&#34;username&#34; /&gt; &lt;input type=&#34;text&#34; placeholder=&#34;key&#34; ng-model=&#34;key&#34; /&gt; &lt;input type=&#34;text&#34; placeholder=&#34;secret&#34; ng-model=&#34;secret&#34; /&gt; &lt;input type=&#34;submit&#34; value=&#34;Authorize&#34; /&gt; &lt;/form&gt; &lt;/div&gt; &lt;div style=&#34;border: solid 1px #000&#34;&gt; &lt;div ng-controller=&#34;Balance&#34;&gt; &lt;button ng-click=&#34;Start()&#34;&gt;Start&lt;/button&gt; &lt;button ng-click=&#34;Stop()&#34;&gt;Stop&lt;/button&gt; {{ balance }} &lt;/div&gt; &lt;/div&gt; &lt;div style=&#34;border: solid 1px #000&#34;&gt; &lt;div ng-controller=&#34;OrderBook&#34;&gt; &lt;div&gt; &lt;button ng-click=&#34;Start()&#34;&gt;Start&lt;/button&gt; &lt;button ng-click=&#34;Stop()&#34;&gt;Stop&lt;/button&gt; &lt;/div&gt; &lt;div style=&#34;width: 50%; float: left;&#34;&gt; &lt;strong&gt;Bids&lt;/strong&gt; &lt;ol&gt; &lt;li ng-repeat=&#34;bid in orderbook." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jason.schwarzenberger.nz/posts/gist/2014-07-30/e5d2776d44f7ee31820a/" />
<meta property="og:image" content="https://jason.schwarzenberger.nz/images/Schwarzenberger.png"/>
<meta property="article:published_time" content="2014-07-30T12:16:05+00:00" />
<meta property="article:modified_time" content="2014-07-30T12:16:05+00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://jason.schwarzenberger.nz/images/Schwarzenberger.png"/>

<meta name="twitter:title" content="index.html"/>
<meta name="twitter:description" content="gist link
   Attachment Type Size     index.html text/html 2.3KiB   pretty-bitnz.js application/javascript 2.8KiB     index.html &ndash; text/html, 2.3KiB &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;script src=&#34;http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/hmac-sha256.js&#34;&gt;&lt;/script&gt; &lt;script src=&#34;https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.17/angular.min.js&#34;&gt;&lt;/script&gt; &lt;script src=&#34;libs/bitnz-angular/bitnz-angular.js&#34;&gt;&lt;/script&gt; &lt;script src=&#34;js/pretty-bitnz.js&#34;&gt;&lt;/script&gt; &lt;style&gt; &lt;/style&gt; &lt;/head&gt; &lt;body ng-app=&#34;PrettyBitNZ&#34;&gt; &lt;div style=&#34;border: solid 1px #000&#34;&gt; &lt;div ng-controller=&#34;Ticker&#34;&gt; &lt;button ng-click=&#34;Start()&#34;&gt;Start&lt;/button&gt; &lt;button ng-click=&#34;Stop()&#34;&gt;Stop&lt;/button&gt; {{ ticker }} &lt;/div&gt; &lt;/div&gt; &lt;div style=&#34;border: solid 1px #000;&#34;&gt; &lt;form ng-controller=&#34;Configuration&#34; ng-submit=&#34;Authorize()&#34;&gt; &lt;input type=&#34;text&#34; placeholder=&#34;username&#34; ng-model=&#34;username&#34; /&gt; &lt;input type=&#34;text&#34; placeholder=&#34;key&#34; ng-model=&#34;key&#34; /&gt; &lt;input type=&#34;text&#34; placeholder=&#34;secret&#34; ng-model=&#34;secret&#34; /&gt; &lt;input type=&#34;submit&#34; value=&#34;Authorize&#34; /&gt; &lt;/form&gt; &lt;/div&gt; &lt;div style=&#34;border: solid 1px #000&#34;&gt; &lt;div ng-controller=&#34;Balance&#34;&gt; &lt;button ng-click=&#34;Start()&#34;&gt;Start&lt;/button&gt; &lt;button ng-click=&#34;Stop()&#34;&gt;Stop&lt;/button&gt; {{ balance }} &lt;/div&gt; &lt;/div&gt; &lt;div style=&#34;border: solid 1px #000&#34;&gt; &lt;div ng-controller=&#34;OrderBook&#34;&gt; &lt;div&gt; &lt;button ng-click=&#34;Start()&#34;&gt;Start&lt;/button&gt; &lt;button ng-click=&#34;Stop()&#34;&gt;Stop&lt;/button&gt; &lt;/div&gt; &lt;div style=&#34;width: 50%; float: left;&#34;&gt; &lt;strong&gt;Bids&lt;/strong&gt; &lt;ol&gt; &lt;li ng-repeat=&#34;bid in orderbook."/>






    
</head>
<body>
    <a class="skip-main" href="#main">Skip to main content</a>
    <div class="container">
        <header> 
            
                <div class="site-header">
    <a class="site-logo" href="/">
        <img src="/images/Schwarzenberger.png" alt="logo" />
    </a>

    <h1>
        <a href="/">Jason Schwarzenberger</a>
    </h1>
    <div>Software engineer from New Zealand.</div>
</div>
<nav>
    
    
    <a class=""
        href="https://jason.schwarzenberger.nz/posts/" title="Archive">Archive</a>
    
    <a class=""
        href="https://jason.schwarzenberger.nz/tags/" title="Tags">Tags</a>
    
</nav>
            
        </header>
        <main id="main" tabindex="-1"> 
            

    <article class="post">
        <header>
            <h1>index.html</h1>
        </header>
        <div class="content">
            <p><a href="https://gist.github.com/e5d2776d44f7ee31820a">gist link</a></p>
<table>
<thead>
<tr>
<th>Attachment</th>
<th>Type</th>
<th>Size</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://gist.githubusercontent.com/master5o1/e5d2776d44f7ee31820a/raw/544210b01298dd60e5a1c0f6efe89b99b8867db0/index.html">index.html</a></td>
<td>text/html</td>
<td>2.3KiB</td>
</tr>
<tr>
<td><a href="https://gist.githubusercontent.com/master5o1/e5d2776d44f7ee31820a/raw/d25de702b311eb7901cab11a42ddc8671eb47e9e/pretty-bitnz.js">pretty-bitnz.js</a></td>
<td>application/javascript</td>
<td>2.8KiB</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="indexhtmlhttpsgistgithubusercontentcommaster5o1e5d2776d44f7ee31820araw544210b01298dd60e5a1c0f6efe89b99b8867db0indexhtml----texthtml-23kib"><a href="https://gist.githubusercontent.com/master5o1/e5d2776d44f7ee31820a/raw/544210b01298dd60e5a1c0f6efe89b99b8867db0/index.html">index.html</a> &ndash; text/html, 2.3KiB</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#f92672">html</span>&gt;
    &lt;<span style="color:#f92672">head</span>&gt;
        &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/hmac-sha256.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
        &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.17/angular.min.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
        &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;libs/bitnz-angular/bitnz-angular.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
        &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;js/pretty-bitnz.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
        &lt;<span style="color:#f92672">style</span>&gt;
        &lt;/<span style="color:#f92672">style</span>&gt;
    &lt;/<span style="color:#f92672">head</span>&gt;
    &lt;<span style="color:#f92672">body</span> <span style="color:#a6e22e">ng-app</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;PrettyBitNZ&#34;</span>&gt;
        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;border: solid 1px #000&#34;</span>&gt;
            &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">ng-controller</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Ticker&#34;</span>&gt;
                &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">ng-click</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Start()&#34;</span>&gt;Start&lt;/<span style="color:#f92672">button</span>&gt; &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">ng-click</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Stop()&#34;</span>&gt;Stop&lt;/<span style="color:#f92672">button</span>&gt;
                {{ ticker }}
            &lt;/<span style="color:#f92672">div</span>&gt;
        &lt;/<span style="color:#f92672">div</span>&gt;
        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;border: solid 1px #000;&#34;</span>&gt;
            &lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">ng-controller</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Configuration&#34;</span> <span style="color:#a6e22e">ng-submit</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Authorize()&#34;</span>&gt;
                &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;username&#34;</span> <span style="color:#a6e22e">ng-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;username&#34;</span> /&gt;
                &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;key&#34;</span> <span style="color:#a6e22e">ng-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;key&#34;</span> /&gt;
                &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;secret&#34;</span> <span style="color:#a6e22e">ng-model</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;secret&#34;</span> /&gt;
                &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Authorize&#34;</span> /&gt;
            &lt;/<span style="color:#f92672">form</span>&gt;
        &lt;/<span style="color:#f92672">div</span>&gt;
        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;border: solid 1px #000&#34;</span>&gt;
            &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">ng-controller</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Balance&#34;</span>&gt;
                &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">ng-click</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Start()&#34;</span>&gt;Start&lt;/<span style="color:#f92672">button</span>&gt; &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">ng-click</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Stop()&#34;</span>&gt;Stop&lt;/<span style="color:#f92672">button</span>&gt;
                {{ balance }}
            &lt;/<span style="color:#f92672">div</span>&gt;
        &lt;/<span style="color:#f92672">div</span>&gt;
        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;border: solid 1px #000&#34;</span>&gt;
            &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">ng-controller</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;OrderBook&#34;</span>&gt;
                &lt;<span style="color:#f92672">div</span>&gt;
                    &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">ng-click</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Start()&#34;</span>&gt;Start&lt;/<span style="color:#f92672">button</span>&gt; &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">ng-click</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Stop()&#34;</span>&gt;Stop&lt;/<span style="color:#f92672">button</span>&gt;
                &lt;/<span style="color:#f92672">div</span>&gt;
                &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 50%; float: left;&#34;</span>&gt;
                    &lt;<span style="color:#f92672">strong</span>&gt;Bids&lt;/<span style="color:#f92672">strong</span>&gt;
                    &lt;<span style="color:#f92672">ol</span>&gt;
                        &lt;<span style="color:#f92672">li</span> <span style="color:#a6e22e">ng-repeat</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bid in orderbook.bids | priceasc | reverse&#34;</span>&gt;{{ bid[1] | number : 8 }} @ ${{ bid[0] | number : 8 }}&lt;/<span style="color:#f92672">li</span>&gt;
                    &lt;/<span style="color:#f92672">ol</span>&gt;
                &lt;/<span style="color:#f92672">div</span>&gt;
                &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;width: 50%; float: right;&#34;</span>&gt;
                    &lt;<span style="color:#f92672">strong</span>&gt;Asks&lt;/<span style="color:#f92672">strong</span>&gt;
                    &lt;<span style="color:#f92672">ol</span>&gt;
                        &lt;<span style="color:#f92672">li</span> <span style="color:#a6e22e">ng-repeat</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;ask in orderbook.asks | priceasc&#34;</span>&gt;{{ ask[1] | number : 8 }} @ ${{ ask[0] | number : 8 }}&lt;/<span style="color:#f92672">li</span>&gt;
                    &lt;/<span style="color:#f92672">ol</span>&gt;
                &lt;/<span style="color:#f92672">div</span>&gt;
                &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;clear: both;&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
            &lt;/<span style="color:#f92672">div</span>&gt;
        &lt;/<span style="color:#f92672">div</span>&gt;
    &lt;/<span style="color:#f92672">body</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><hr>
<h3 id="pretty-bitnzjshttpsgistgithubusercontentcommaster5o1e5d2776d44f7ee31820arawd25de702b311eb7901cab11a42ddc8671eb47e9epretty-bitnzjs----applicationjavascript-28kib"><a href="https://gist.githubusercontent.com/master5o1/e5d2776d44f7ee31820a/raw/d25de702b311eb7901cab11a42ddc8671eb47e9e/pretty-bitnz.js">pretty-bitnz.js</a> &ndash; application/javascript, 2.8KiB</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">app</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">angular</span>.<span style="color:#a6e22e">module</span>(<span style="color:#e6db74">&#39;PrettyBitNZ&#39;</span>, [<span style="color:#e6db74">&#39;BitNZ&#39;</span>]);

<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">filter</span>(<span style="color:#e6db74">&#39;priceasc&#39;</span>, <span style="color:#66d9ef">function</span>() {
  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">items</span>) {
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">list</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">slice</span>();
    <span style="color:#a6e22e">list</span>.<span style="color:#a6e22e">sort</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>) {
      <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">-</span> <span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">0</span>];
    });
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">list</span>;
  };
});

<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">filter</span>(<span style="color:#e6db74">&#39;reverse&#39;</span>, <span style="color:#66d9ef">function</span>() {
  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">items</span>) {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">items</span>.<span style="color:#a6e22e">slice</span>().<span style="color:#a6e22e">reverse</span>();
  };
});

<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">controller</span>(<span style="color:#e6db74">&#39;Configuration&#39;</span>, [<span style="color:#e6db74">&#39;$scope&#39;</span>, <span style="color:#e6db74">&#39;$log&#39;</span>, <span style="color:#e6db74">&#39;BitNZ&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">$scope</span>, <span style="color:#a6e22e">$log</span>, <span style="color:#a6e22e">bitnz</span>){
  <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">username</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>;
  <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>;
  <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">secret</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>;

  <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">Authorize</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">bitnz</span>.<span style="color:#a6e22e">authorize</span>(<span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">username</span>, <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">secret</span>);
  };
}]);

<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">controller</span>(<span style="color:#e6db74">&#39;Ticker&#39;</span>, [<span style="color:#e6db74">&#39;$scope&#39;</span>, <span style="color:#e6db74">&#39;$interval&#39;</span>, <span style="color:#e6db74">&#39;$log&#39;</span>, <span style="color:#e6db74">&#39;BitNZ&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">$scope</span>, <span style="color:#a6e22e">$interval</span>, <span style="color:#a6e22e">$log</span>, <span style="color:#a6e22e">bitnz</span>){
  <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">ticker</span> <span style="color:#f92672">=</span> {};

  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">interval</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;

  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fn</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(){
    <span style="color:#a6e22e">$log</span>.<span style="color:#a6e22e">info</span>(<span style="color:#e6db74">&#39;run&#39;</span>);
    <span style="color:#a6e22e">bitnz</span>.<span style="color:#a6e22e">ticker</span>().<span style="color:#a6e22e">success</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">data</span>){
      <span style="color:#a6e22e">$log</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;ticker&#39;</span>, <span style="color:#a6e22e">data</span>);
      <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">ticker</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>;
    }).<span style="color:#a6e22e">error</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">data</span>){
      <span style="color:#a6e22e">$log</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;ticker&#39;</span>, <span style="color:#a6e22e">data</span>);
      <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">Stop</span>();
    });
  };

  <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">Start</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">$log</span>.<span style="color:#a6e22e">info</span>(<span style="color:#e6db74">&#39;ticker&#39;</span>, <span style="color:#e6db74">&#39;start&#39;</span>);
    <span style="color:#a6e22e">fn</span>();
    <span style="color:#a6e22e">interval</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">$interval</span>(<span style="color:#a6e22e">fn</span>, <span style="color:#ae81ff">60</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">1000</span>);
  };

  <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">Stop</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">$log</span>.<span style="color:#a6e22e">info</span>(<span style="color:#e6db74">&#39;ticker&#39;</span>, <span style="color:#e6db74">&#39;stop&#39;</span>);
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">angular</span>.<span style="color:#a6e22e">isDefined</span>(<span style="color:#a6e22e">interval</span>)) {
      <span style="color:#a6e22e">$interval</span>.<span style="color:#a6e22e">cancel</span>(<span style="color:#a6e22e">interval</span>);
      <span style="color:#a6e22e">interval</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">undefined</span>;
    }
  };

}]);

<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">controller</span>(<span style="color:#e6db74">&#39;OrderBook&#39;</span>, [<span style="color:#e6db74">&#39;$scope&#39;</span>, <span style="color:#e6db74">&#39;$interval&#39;</span>, <span style="color:#e6db74">&#39;$log&#39;</span>, <span style="color:#e6db74">&#39;BitNZ&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">$scope</span>, <span style="color:#a6e22e">$interval</span>, <span style="color:#a6e22e">$log</span>, <span style="color:#a6e22e">bitnz</span>){
  <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">orderbook</span> <span style="color:#f92672">=</span> {
    <span style="color:#a6e22e">bids</span><span style="color:#f92672">:</span> [],
    <span style="color:#a6e22e">asks</span><span style="color:#f92672">:</span> []
  };

  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">interval</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;

  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fn</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(){
    <span style="color:#a6e22e">$log</span>.<span style="color:#a6e22e">info</span>(<span style="color:#e6db74">&#39;run&#39;</span>);
    <span style="color:#a6e22e">bitnz</span>.<span style="color:#a6e22e">orderbook</span>().<span style="color:#a6e22e">success</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">data</span>){
      <span style="color:#a6e22e">$log</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;orderbook&#39;</span>, <span style="color:#a6e22e">data</span>);
      <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">orderbook</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>;
    }).<span style="color:#a6e22e">error</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">data</span>){
      <span style="color:#a6e22e">$log</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;orderbook&#39;</span>, <span style="color:#a6e22e">data</span>);
      <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">Stop</span>();
    });
  };

  <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">Start</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">$log</span>.<span style="color:#a6e22e">info</span>(<span style="color:#e6db74">&#39;orderbook&#39;</span>, <span style="color:#e6db74">&#39;start&#39;</span>);
    <span style="color:#a6e22e">fn</span>();
    <span style="color:#a6e22e">interval</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">$interval</span>(<span style="color:#a6e22e">fn</span>, <span style="color:#ae81ff">60</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">1000</span>);
  };

  <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">Stop</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">$log</span>.<span style="color:#a6e22e">info</span>(<span style="color:#e6db74">&#39;orderbook&#39;</span>, <span style="color:#e6db74">&#39;stop&#39;</span>);
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">angular</span>.<span style="color:#a6e22e">isDefined</span>(<span style="color:#a6e22e">interval</span>)) {
      <span style="color:#a6e22e">$interval</span>.<span style="color:#a6e22e">cancel</span>(<span style="color:#a6e22e">interval</span>);
      <span style="color:#a6e22e">interval</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">undefined</span>;
    }
  };

}]);

<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">controller</span>(<span style="color:#e6db74">&#39;Balance&#39;</span>, [<span style="color:#e6db74">&#39;$scope&#39;</span>, <span style="color:#e6db74">&#39;$interval&#39;</span>, <span style="color:#e6db74">&#39;$log&#39;</span>, <span style="color:#e6db74">&#39;BitNZ&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">$scope</span>, <span style="color:#a6e22e">$interval</span>, <span style="color:#a6e22e">$log</span>, <span style="color:#a6e22e">bitnz</span>){
  <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">balance</span> <span style="color:#f92672">=</span> {};

  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">interval</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;

  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fn</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(){
    <span style="color:#a6e22e">$log</span>.<span style="color:#a6e22e">info</span>(<span style="color:#e6db74">&#39;run&#39;</span>);
    <span style="color:#a6e22e">bitnz</span>.<span style="color:#a6e22e">balance</span>().<span style="color:#a6e22e">success</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">data</span>){
      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">result</span> <span style="color:#f92672">===</span> <span style="color:#66d9ef">false</span>) {
        <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">Stop</span>();
        <span style="color:#66d9ef">return</span>;
      }
      <span style="color:#a6e22e">$log</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;balance&#39;</span>, <span style="color:#a6e22e">data</span>);
      <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">balance</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>;
    }).<span style="color:#a6e22e">error</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">data</span>){
      <span style="color:#a6e22e">$log</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;balance&#39;</span>, <span style="color:#a6e22e">data</span>);
      <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">Stop</span>();
    });
  };

  <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">Start</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">$log</span>.<span style="color:#a6e22e">info</span>(<span style="color:#e6db74">&#39;balance&#39;</span>, <span style="color:#e6db74">&#39;start&#39;</span>);
    <span style="color:#a6e22e">fn</span>();
    <span style="color:#a6e22e">interval</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">$interval</span>(<span style="color:#a6e22e">fn</span>, <span style="color:#ae81ff">60</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">1000</span>);
  };

  <span style="color:#a6e22e">$scope</span>.<span style="color:#a6e22e">Stop</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">$log</span>.<span style="color:#a6e22e">info</span>(<span style="color:#e6db74">&#39;balance&#39;</span>, <span style="color:#e6db74">&#39;stop&#39;</span>);
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">angular</span>.<span style="color:#a6e22e">isDefined</span>(<span style="color:#a6e22e">interval</span>)) {
      <span style="color:#a6e22e">$interval</span>.<span style="color:#a6e22e">cancel</span>(<span style="color:#a6e22e">interval</span>);
      <span style="color:#a6e22e">interval</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">undefined</span>;
    }
  };

}]);
</code></pre></div>
        </div>
        

    


<div class="article-info">
    
        <div class="article-date">2014-07-30 12:16</div>
    
    <div class="article-taxonomies">
        
            
                <ul class="article-tags">
                    
                        <li><a href="https://jason.schwarzenberger.nz/tags/gist">#gist</a></li>
                    
                </ul>
        
    </div>
</div>

    </article>
    


        </main>
        <footer>
            
                
                

                
            
        </footer>
    </div>
</body>
</html>
